<%- include('../elements/head'); -%>
<style>
  .likes {
    color: #fff;
    position: absolute;
    top: 10px;
    right: 0px;
    background-color: rgba(0,0,0, 0.2);
    padding: 0.25rem 1rem 0.25rem 0.5rem;
    -webkit-border-top-left-radius: 4px;
    -webkit-border-bottom-left-radius: 4px;
    -moz-border-radius-topleft: 4px;
    -moz-border-radius-bottomleft: 4px;
    border-top-left-radius: 4px;
    border-bottom-left-radius: 4px;
  }
</style>

<main class="container">
  <div class="row">
    <div class="col-md-8 col-lg-9">
      <div class="row">
        <% if (posts.length > 0){ %>
          <% for(let post of posts){ %>
            <div class="col-md-6 col-lg-4 pb-4">
              <div class="card h-100">
                <img src="<%= post.image %>" class="card-img-top" alt="<%= post.title %>">
                <div class="likes">
                  <i class="bi bi-heart me-2"></i>
                  <span><%= post.likes %></span>
                </div>
                <div class="card-body">
                  <h5 class="card-title"><%= post.title %></h5>
                </div>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item">
                    <i class="bi bi-bookmarks me-2"></i>
                    <% for(let category of post.categories){ %>
                      <%= category.name %>
                    <% } %>
                  </li>
                  <li class="list-group-item">
                    <i class="bi bi-calendar2-minus me-2"></i>
                    <span class="">
                      <%= moment(post.created).fromNow() %>
                    </span>
                  </li>
                </ul>
                <div class="card-footer">
                  <a href="/blog/<%= post._id %>" class="btn w-100">Read more <i class="bi bi-arrow-right"></i></a>
                </div>
              </div>
            </div>
          <% } %>
        <% } else { %>
          <p class="text-center my-4">No post found.</p>
      <% } %>
      </div>
    </div>
    <div class="col-md-4 col-lg-3">
      <%- include('../elements/sidebar'); -%>
    </div>
  </div>

</main>

<%- include('../elements/foot'); -%>
